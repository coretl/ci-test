name: Code CI

on:
  push:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v4
        - id: pypi
          if: ${{ hashFiles('./.github/workflows/sub.yml') != '' }}
          run: echo "Will run PyPI publishing"
    outputs:
        pypi: ${{ steps.pypi.outcome == 'success' }}
    
  lint:
    needs: build
    runs-on: ubuntu-latest
    steps:
        - if: ${{ needs.build.outputs.pypi }}
          uses: ./.github/workflows/sub.yml
